{% load static %}
{#<!DOCTYPE html>#}
<html lang="uk">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>PASUE Club - Grand Opening Party</title>
    <meta
      name="description"
      content="Перша подія від PASUE Club - закрите жіноче комʼюніті. Приєднуйся до Grand Opening Party!"
    />
    <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caprasimo&family=Cormorant+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="scale-wrapper">
        <section id="section-header" class="header-section">
          <header class="site-header">
            <div class="logo">
              <img src="{% static 'images/main_logo.png' %}" alt="PASUE Club Logo background" class="logo-bg">
              <span class="logo-text">закрите жіноче комʼюніті</span>
            </div>
          </header>
        </section>

        <section id="section-coming-soon">
            <div class="coming-soon">
              <div class="coming-soon-background-wrapper">
                <img src="{% static 'images/girls-picture.png' %}" alt="Two stylish women" class="coming-soon-main-image">
              </div>
              <div class="coming-soon-text-content">
                <h2 class="coming-soon-subtitle">Новий простір для жінок</h2>
                <h1 class="coming-soon-title">COMING SOON</h1>
                <a href="{% url 'opening' %}" class="cta-button-soon">
                  <span>Святкуй відкриття разом з нами</span>
                  <img src="{% static 'images/heart_btn.png' %}" alt="Heart icon" class="cta-icon-soon">
                </a>
              </div>
            </div>
        </section>

        <section id="section-footer">
          <footer class="site-footer">
            <div class="social-links">
              <a href="https://instagram.com/pasue.club" class="footer-social-link" target="_blank" aria-label="Instagram">
                  <img src="{% static 'images/instagram-icon.png' %}" alt="Instagram" />
                  <span>@pasue.club</span>
              </a>
              <a href="mailto:pasue.club@gmail.com" class="footer-social-link" aria-label="Email">
                  <img src="{% static 'images/email-icon.png' %}" alt="Email" />
                  <span>pasue.club@gmail.com</span>
              </a>
              <a href="#" class="footer-social-link" target="_blank" aria-label="Telegram" onclick="openTelegram(event)">
                  <img src="{% static 'images/telegram-icon.png' %}" alt="Telegram" />
                  <span>+38 068 443 78 82</span>
              </a>
            </div>
            <div class="footer-legal-links">
              <a href="#" data-popup="offer">Правила та умови</a>
              <a href="#" data-popup="privacy">Політика повернення коштів</a>
            </div>
            <p class="copyright">Всі права захищені</p>
          </footer>
        </section>
    </div>
    <div class="popup" id="popup-privacy">
          <div class="popup-content desktop">
            <span class="popup-close">&times;</span>
            <h2>Політика повернення коштів</h2>
            <ol>
              <li>Повернення коштів за електронні квитки на події<br> не передбачене, окрім випадків скасування заходу з<br> ініціативи організатора.</li>
              <li>Якщо подія перенесена, квиток залишається<br> дійсним. У разі неможливості відвідування —<br> прохання повідомити на email.</li>
              <li>Замовлення можна скасувати до моменту оплати.</li>
            </ol>
          </div>
    </div>
    <div class="popup" id="popup-offer">
      <div class="popup-content desktop">
        <span class="popup-close">&times;</span>
        <h2>Правила та умови</h2>

        <p><b>Опис послуги:</b></p>
        <p>Цей сайт є офіційною онлайн-платформою PASUE Club,<br> де Ви можете придбати квитки на заходи клубу.</p>

        <p><b>Умови замовлення:</b></p>
        <ul>
            <li>Покупець зобов'язується надати достовірну<br> контактну інформацію.</li>
            <li>Замовлення вважається дійсним лише після<br> підтвердження успішної оплати на email покупця.</li>
        </ul>

        <p><b>Оплата:</b></p>
        <ul>
            <li>Оплата здійснюється онлайн за допомогою<br> платіжної системи WayForPay.</li>
            <li>Валюта платежу — гривня (UAH).</li>
        </ul>

        <p><b>Доставка:</b></p>
        <ul>
            <li>Електронні квитки надсилаються на email одразу<br> після підтвердження оплати.</li>
        </ul>
      </div>
    </div>
    <!-- Підключаємо зовнішній JS -->
    <script src="{% static 'js/main.js' %}"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      // --- 1. Зберігаємо UTM у cookies ---
      function saveUTMToCookies() {
        const params = new URLSearchParams(window.location.search);
        const utms = ["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];
        utms.forEach(name => {
          const value = params.get(name);
          if (value) {
            document.cookie = `${name}=${encodeURIComponent(value)}; path=/; max-age=${60*60*24*30}`;
          }
        });
      }
      // --- 2. Отримуємо UTM з cookies ---
      function getUTMFromCookies() {
        const utms = ["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];
        const result = {};
        utms.forEach(name => {
          const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
          result[name] = match ? decodeURIComponent(match[2]) : "";
        });
        return result;
      }
      // --- 3. Підставляємо UTM у форму ---
      function fillUTMInForm() {
        const utms = getUTMFromCookies();
        Object.keys(utms).forEach(name => {
          const input = document.getElementById(name);
          if (input) input.value = utms[name];
        });
      }
      // --- 4. Редирект між десктоп і мобільною версією ---
      function checkScreenSize() {
        saveUTMToCookies(); // зберігаємо UTM перед редиректом
        const path = window.location.pathname;
        const utms = getUTMFromCookies();
        const utmQuery = Object.keys(utms).map(k => utms[k] ? `${k}=${encodeURIComponent(utms[k])}` : "").filter(Boolean).join("&");

        if (window.innerWidth < 1000 && path === "/") {
          // редирект на мобільну версію головної сторінки
          window.location.href = "{% url 'mobile' %}" + (utmQuery ? `?${utmQuery}` : "");
        }
      }

      // --- Виклики ---
      fillUTMInForm();
      checkScreenSize();
      window.addEventListener("resize", checkScreenSize);

    });
    </script>
    <script>
      function openTelegram(e) {
        e.preventDefault();
        const phone = "380684437882";
        const tgApp = `tg://resolve?phone=${phone}`;
        const tgWeb = `https://t.me/+${phone}`;

        window.location.href = tgApp;

        setTimeout(() => {
          window.open(tgWeb, "_blank");
        }, 1000);
      }
    </script>
  </body>
</html>