{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>PASUE Club - Grand Opening Party</title>
    <meta
      name="description"
      content="Перша подія від PASUE Club - закрите жіноче комʼюніті. Приєднуйся до Grand Opening Party!"
    />
    <link rel="stylesheet" href="{% static 'css/mobile.css' %}" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caprasimo&family=Cormorant+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '2342533109544263');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=2342533109544263&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
</head>
<body>
    <div class="hero-wrapper-soon">
        <section id="hero-soon">
          <div class="hero-container-soon">
            <div class="hero-content-wrapper-soon">
              <img src="{% static 'images/main_logo_mob.png' %}" alt="Pasue Club Logo" class="logo-image-soon">
              <p class="logo-subtitle-soon">закрите жіноче комʼюніті</p>
            </div>
          </div>
        </section>
        <section id="girls-content">
            <div class="hero-container-soon-2">
                <div class="hero-content-wrapper-soon-2">
                    <img src="{% static 'images/girls-picture.png' %}" alt="Two women posing" class="hero-background-image-soon">
                      <p class="hero-subtitle-soon">Новий простір для жінок</p>
                      <h1 class="hero-title-soon">COMING SOON</h1>
                      <a href="{% url 'opening_mobile' %}" class="cta-button-soon">
                        <span class="cta-text-soon">Святкуй відкриття разом з нами</span>
                        <img src="{% static 'images/heart_btn.png' %}" alt="Arrow icon" class="cta-icon-soon">
                      </a>
                </div>
            </div>
        </section>
        <footer id="footer" class="site-footer-soon">
          <div class="container footer-container">
            <div class="social-links">
              <a href="https://instagram.com/pasue.club" aria-label="Instagram"><img src="{% static 'images/instagram-icon.png' %}" alt="Instagram"></a>
              <a href="https://t.me/+380684437882" aria-label="Telegram"><img src="{% static 'images/telegram-icon.png' %}" alt="Telegram"></a>
              <a href="mailto:pasue.club@gmail.com" aria-label="Email"><img src="{% static 'images/email-icon.png' %}" alt="Email"></a>
            </div>
            <nav class="footer-nav">
              <a href="#" data-popup="terms">Правила та умови</a>
              <a href="#" data-popup="refund">Політика повернення коштів</a>
            </nav>
            <div class="popup" id="popup-terms">
              <div class="popup-content mobile">
                <h2>Правила та умови</h2>
                <p><b>Опис послуги:</b></p>
                  <ul>Цей сайт є офіційною онлайн-<br>платформою PASUE Club, де Ви можете<br> придбати квитки на заходи клубу.</ul>
                <p><b>Умови замовлення:</b></p>
                  <li>Покупець зобов'язується надати<br> достовірну контактну інформацію.</li>
                  <li>Замовлення вважається дійсним<br> лише після підтвердження успішної<br> оплати на email покупця.</li>
                <p><b>Оплата:</b><br></p>
                  <li>Оплата здійснюється онлайн за<br> допомогою платіжної системи<br> WayForPay.</li>
                  <li>Валюта платежу — гривня (UAH).</li>
                <p><b>Доставка:</b><br></p>
                  <li>Електронні квитки надсилаються<br> на email одразу після підтвердження<br> оплати.</li>
                <span class="popup-close">✕</span>
              </div>
            </div>
            <div class="popup" id="popup-refund">
              <div class="popup-content mobile">
                <h2>Політика повернення коштів</h2>
                <ol>
                  <li>Повернення коштів за електронні<br> квитки на події не передбачене,<br> окрім випадків скасування заходу з<br> ініціативи організатора.</li>
                  <li>Якщо подія перенесена, квиток<br> залишається дійсним. У разі<br> неможливості відвідування —<br> прохання повідомити на email.</li>
                  <li>Замовлення можна скасувати до<br> моменту оплати.</li>
                </ol>
                <span class="popup-close">✕</span>
              </div>
            </div>
            <p class="copyright">Всі права захищені</p>
          </div>
        </footer>
    </div>

    <script src="{% static 'js/mobile.js' %}"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      // --- 1. Зберігаємо UTM у cookies ---
      function saveUTMToCookies() {
        const params = new URLSearchParams(window.location.search);
        const utms = ["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];
        utms.forEach(name => {
          const value = params.get(name);
          if (value) {
            document.cookie = `${name}=${encodeURIComponent(value)}; path=/; max-age=${60*60*24*30}`;
          }
        });
      }

      // --- 2. Отримуємо UTM з cookies ---
      function getUTMFromCookies() {
        const utms = ["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];
        const result = {};
        utms.forEach(name => {
          const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
          result[name] = match ? decodeURIComponent(match[2]) : "";
        });
        return result;
      }

      // --- 3. Редирект між десктоп і мобільною версією ---
      function checkScreenSize() {
        saveUTMToCookies(); // зберігаємо UTM перед редиректом
        const path = window.location.pathname;
        const utms = getUTMFromCookies();
        const utmQuery = Object.keys(utms).map(k => utms[k] ? `${k}=${encodeURIComponent(utms[k])}` : "").filter(Boolean).join("&");

        if (window.innerWidth >= 1000 && path === "/mobile/") {
          // редирект на десктоп версію головної сторінки
          window.location.href = "{% url 'home' %}" + (utmQuery ? `?${utmQuery}` : "");
        }
      }

      // --- Виклики ---
      saveUTMToCookies();
      checkScreenSize();
      window.addEventListener("resize", checkScreenSize);

    });
    </script>
</body>
</html>